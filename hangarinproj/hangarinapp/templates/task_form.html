{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}{{ view.title }} | Hangarin{% endblock %}

{% block content %}
<div class="page-header d-flex justify-content-between align-items-center mb-4">
    <h2>üìù {{ view.title }}</h2>
    <a href="{% url 'task-list' %}" class="btn btn-outline-pink">
        <i class="bi bi-arrow-left"></i> Back to Tasks
    </a>
</div>

<div class="card shadow-sm border-0 p-4">
    <form method="post" novalidate>
        {% csrf_token %}
        
        <!-- ‚úÖ Show general form errors if any -->
        {% if form.non_field_errors %}
            <div class="alert alert-danger">
                {{ form.non_field_errors }}
            </div>
        {% endif %}

        <div class="mb-3">
            <label class="form-label fw-semibold">Title</label>
            {{ form.title|add_class:"form-control form-control-lg rounded-pill" }}
            {% if form.title.errors %}
                <div class="text-danger small mt-1">{{ form.title.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label class="form-label fw-semibold">Description</label>
            {{ form.description|add_class:"form-control form-control-lg rounded-pill" }}
            {% if form.description.errors %}
                <div class="text-danger small mt-1">{{ form.description.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label class="form-label fw-semibold">Category</label>
            {{ form.category|add_class:"form-select form-select-lg rounded-pill" }}
            {% if form.category.errors %}
                <div class="text-danger small mt-1">{{ form.category.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label class="form-label fw-semibold">Priority</label>
            {{ form.priority|add_class:"form-select form-select-lg rounded-pill" }}
            {% if form.priority.errors %}
                <div class="text-danger small mt-1">{{ form.priority.errors }}</div>
            {% endif %}
        </div>

        <!-- ‚úÖ Optional: Add status and due date fields if your model uses them -->
        {% if form.status %}
        <div class="mb-3">
            <label class="form-label fw-semibold">Status</label>
            {{ form.status|add_class:"form-select form-select-lg rounded-pill" }}
            {% if form.status.errors %}
                <div class="text-danger small mt-1">{{ form.status.errors }}</div>
            {% endif %}
        </div>
        {% endif %}

        {% if form.due_date %}
        <div class="mb-3">
            <label class="form-label fw-semibold">Due Date</label>
            {{ form.due_date|add_class:"form-control form-control-lg rounded-pill" }}
            {% if form.due_date.errors %}
                <div class="text-danger small mt-1">{{ form.due_date.errors }}</div>
            {% endif %}
        </div>
        {% endif %}

        <button type="submit" class="btn btn-pink btn-lg mt-3 w-100">
            <i class="bi bi-save"></i> Save Task
        </button>
    </form>
</div>

<div class="footer-decor mt-5 text-center">
    <img src="{% static 'images/pinky.jpg' %}" alt="Decorative Image" style="max-width: 15000px;">
</div>
{% endblock %}
